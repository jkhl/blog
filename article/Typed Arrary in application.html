<html>
<head>
  <title>Typed Arrary in application</title>
  <basefont face="Tahoma" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/268604 (zh-CN); Windows/6.1.7601 Service Pack 1;"/>
  <meta name="viewport" content="width=device-width; initial-scale=1.0; maximun-scale=1.0; user-scalable=0;"/>
  <link href="../css/common.css" rel="stylesheet" type="text/css" charset="utf-8"/>

</head>
<body>


<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><div style="text-align: center;"><b style="font-size: 16px;"><font color="#464646">Typed Arrary in application</font></b></div><div style="text-align: center;"><b><font color="#797979"><br></font></b></div><div style="text-align: center;"><font color="#797979">04-30-2013</font></div><hr><br><div>Typed Array is a new data style in Javascript defined by Khronos group, which is a ArraryBuffer type. Khronos group is a very excellent group that have define many awesome tech standard such as OpenGL, OpenCl, WebGL and so on. For more infomation about Khronos group you can visit the website of Khronos group. But here, our key point is introduct how to apply typed array to you programming.</div><div><br></div><div><b><font color="#464646">1. What is typed array ?</font></b></div><div>Typed array is kind of array that can operate the array buffer. Array buffer is a kind of buffer that can store binary data in JavsScript programming. You can simple imagine that the arrary buffer is a train of boxes that one close to another, and one box can contian 8 bits binary. Array buffer is the basic of typed array, which contain the data that typed array will use. The buffer can be defined like this:</div><div align="left">     <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt; background:#f2f4ff"><b>var</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt; background:#f2f4ff">buffer</span> <span style="font-size:10pt; background:#f2f4ff"><b>=</b></span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt; background:#f2f4ff"><b>new</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt; background:#f2f4ff">ArrayBuffer</span><span style="font-size:10pt; background:#f2f4ff"><b>(</b>8</span><span style="font-size:10pt; background:#f2f4ff"><b>);</b></span></font></div><div>the ArrayBuffer needs a argument that define the length of the buffer, here it is 8, which mean that we already have a buffer that can contain 8 bytes data in the most.</div><div>When you have initualized a array buffer, we need to define a typed array to store data to the buffer.</div><div align="left">     <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt; background:#f2f4ff"><b>var</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt; background:#f2f4ff">int8Array</span> <span style="font-size:10pt; background:#f2f4ff"><b>=</b></span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt; background:#f2f4ff"><b>new</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt; background:#f2f4ff">Int8Array</span><span style="font-size:10pt; background:#f2f4ff"><b>(</b></span><span style="font-size:10pt; background:#f2f4ff">buffer</span><span style="font-size:10pt; background:#f2f4ff"><b>);</b></span></font></div><div>Typed array has some different types: int8Array/Uint8Array(one buffer box for one array item), int16Array/Uinit16Array(two buffer boxes for one array item), int32Array/Unit32Array(four buffer boxes for one array item) and so on, more typed can see the reference below. Different kind of typed array can store data in one array item with different binary length, like int8Array/Uint8Array can store 8 bits binary data in one item of the array, and int16Array/Uint16Array can store 16 bits binary data in one array item. Type array just like a window to see and operate the buffer. And they can receive three arguments when we use:</div><div>     <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt; background:#f2f4ff"><b>var</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt; background:#f2f4ff">int8Array</span> <span style="font-size:10pt; background:#f2f4ff"><b>=</b></span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt; background:#f2f4ff"><b>new</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt; background:#f2f4ff">Int8Array</span><span style="font-size:10pt; background:#f2f4ff"><b>(</b></span><span style="font-size:10pt; background:#f2f4ff">buffer</span><span style="font-size:10pt; background:#f2f4ff"><b>,</b></span></font> <font color="#FF0000" face="Courier New" size="2"><span style="font-size:10pt; background:#f2f4ff">0</span></font> <font face="Courier New" size="2"><span style="font-size:10pt; background:#f2f4ff"><b>,</b></span></font> <font color="#FF0000" face="Courier New" size="2"><span style="font-size:10pt; background:#f2f4ff">2</span></font><font face="Courier New" size="2"><span style="font-size:10pt; background:#f2f4ff"><b>);</b></span></font></div><div>The first argument is the buffer we want to operate, the second argument is the offset place/box in the buffer we want to start(here our offset is 0, so we start from the first box), and third argument is length of the typed array(here our int8Array has two items). </div><div>The define of typed array is easy, but there are some key points that should be in mind when we use the typed array to operate the buffer:</div><div><ol><li>(the length of the buffer) % (the typed number / 8) == 0, Which mean that if you init a Int16Array/Unit16Array, the buffer it operate must have a length that (the length) % 2 == 0, if not a error will be reported in the consle.</li><li>(the offset) == (the typed number / 8), which neam that if you init a Int16Array/Unit16Array, the offset must be the number that (the number % 2) == 0, if not a error will be reported in the consle.</li><li>Different typed array can operate the same array buffer, and the buffer box can be rewrited if we store different data in the whether with the same typed array or not.</li></ol></div><div>With the careful about these three point listed above, you will find the typed array is very nice when use it.</div><div><br></div><div><b><font color="#464646">What typed array can do ?</font></b></div><div>As we introduced, the typed array is way to operate binarry data in JavaScript, so the most powerful aspect of typed array is that it enable us do some intersting thing on the binarry level with data, including data processing, data encode, data translate and so on.</div><div>As for the data processing, it usually be use in the audio, video or image data processing in cooprate with some HTML5 application programming interface, which will make some easy that can not be imagined before, like voice recognize, video analysis and scence recognize by pictrue, that can implement the most traditional meathod used in the data processing.</div><div style="text-align: left;">Typed array also provides a new way to encode data in the web development. It operate data in the binarry level, so you can store and encode you data in binarry as a unique style you like. For a simple instance, string &quot;abc&quot; can be stored in a way like: &quot;a&quot; be store with Int8Arry and &quot;b&quot; is stored with Uint16Arry and &quot;c&quot; is stored with Int32Arry, and they operate a same buffer with offset to store the &quot;abc&quot;, so we have encode the string without a more complex operation but with a powerful encode funciton. But in mind that, you should remenber the rule you store the data and not others.</div><div style="text-align: left;">Translate data with binarry is also a way worthy trying, for you can easy encode the data with the introduce above. With binarry data translating on the internet you need enable the Web server support the WebSocket, which is a new character defined in HTML5, and more lib in PHP, JAVA, Python, and Nodejs are available. If you use the nodejs on the server, here introduce a the ws to consotruct the WebSocket connection to translate the binarry data, which is easy to use.</div><div style="text-align: left;"><br></div><div style="text-align: left;">Ok, I hope now you have had a conception about typed array and how to use it in you application. No need to say thanks, just trying to make you programming interesting, make you life meaningful !</div><div style="text-align: left;"><br></div><div style="text-align: left;"><b><font color="#464646">Reference</font></b> </div><div>1. Typed Array Specification: <a href="http://www.khronos.org/registry/typedarray/specs/latest/">http://www.khronos.org/registry/typedarray/specs/latest/</a></div><div>2. Translate binary data from server to client by ws: <a href="http://granular.cs.umu.se/browserphysics/?p=865">http://granular.cs.umu.se/browserphysics/?p=865</a></div></div>
</div>
<div class="back"><a href="../index.html">Go Back</a></div>
</body></html> 